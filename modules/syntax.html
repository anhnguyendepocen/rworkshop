<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="chrome=1">
<meta name="viewport" content="width=device-width">
<link rel="stylesheet" href="/rworkshop/assets/css/style.css">
<link rel="stylesheet" href="/rworkshop/assets/css/syntax_default.css">
<link rel="stylesheet" href="/rworkshop/assets/leaflet/leaflet.css" />
<script defer src="/rworkshop/assets/js/fontawesome-all.js"></script>
<!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->


  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Workshop on R<a href="https://github.com/btskinner/rworkshop" class="iconlink">
	      <i class="fab fa-github fa-xs"></i></a></h1>
	<h2 class="thin">January 2018</h2>
	<p>Hosted by Virginia Education Science Training (VEST) Program at UVA</p>
	
        <p>
	  <a href="https://curry.virginia.edu/faculty-research/centers-labs-projects/edpolicyworks">
	    <img src="https://curry.virginia.edu/sites/default/files/uploads/epw/EdPolicyWork%20horz%20logo%20high%20res.png" style="width:100%;">
	  </a>
	</p>
	<h2 class="thin">
	  <a href="/rworkshop/">Overview</a></br>
	  <a href="/rworkshop/schedule/">Schedule</a></br>
	  <a href="/rworkshop/start/">Getting started</a></br>
	  <a href="/rworkshop/modules/">Modules</a></br>
	  <a href="/rworkshop/data/">Data</a></br>
	</h2>
      </header>

      <section>

      <h1>Syntax</h1>


<p>
  <a href="/rworkshop/scripts/syntax.R"
     class="iconlink" download title="Get script">
    <i class="fas fa-code fa-2x"></i>
  </a>
  &nbsp;&nbsp;
  
</p>


<p>It’s hard to know where to start when teaching a new programming
language. This page is meant to give some background about R that
hopefully</p>
<ol>
  <li>explains a little about how it is put together, and</li>
  <li>puts it in context with other programming languages you might know.</li>
</ol>

<p>That said, revisiting this page after after working through the other
modules might be useful.</p>

<h1 id="r-language--environment">R: language + environment</h1>

<p>R is a port of the <a href="https://en.wikipedia.org/wiki/S_(programming_language)">S
language</a>, which
was developed at Bell Labs. As a <a href="https://www.gnu.org">GNU project</a>, R
is open source and free (<a href="https://en.wikipedia.org/wiki/Gratis_versus_libre">as in
freedom</a>) to use and
distribute. It can be installed and used on most major operating
systems.</p>

<p>R is best thought of as an integrated <a href="https://www.r-project.org/about.html">language and
environment</a> that was designed
with statistical computing and data analysis in mind. To that end, its
structure represents a compromise between a code base optimized for
mathematical procedures and one with high-level functionality that can
be used interactively (unlike compiled code). In other words, it’s a
great tool for working interactively with quantitative data.</p>

<p>R is probably best known for its graphing capabilities, but it has
<a href="http://blog.revolutionanalytics.com/2018/01/tiobe-2017.html">continued to grow in popularity among data
scientists</a>,<sup id="fnref:1"><a href="#fn:1" class="footnote">1</a></sup>
who are increasingly <a href="http://blog.revolutionanalytics.com/2017/01/cran-10000.html">extending R’s functionality through
user-contributed
packages</a>.<sup id="fnref:2"><a href="#fn:2" class="footnote">2</a></sup>
We will use a number of packages in this workshop.</p>

<h2 id="integrated-development-environment-ide-for-r">Integrated development environment (IDE) for R</h2>

<h3 id="rstudio">RStudio</h3>

<p><a href="https://www.rstudio.com">RStudio</a> does most everything R-related well
and with little fuss, so it’s a great all-around program for using R. We
will use it in this workshop.</p>

<blockquote>
  <h4 id="quick-exercise">Quick exercise</h4>

  <p>If you haven’t already, open up RStudio and poke around. First, try
entering an equation in the console (like <code class="highlighter-rouge">1 + 1</code>). Next, open the
script associated with this module and run the first line.</p>
</blockquote>

<h1 id="assignment">Assignment</h1>

<p>R thinks of things as objects. Objects are like boxes in which we can
put things: data, functions, and even other objects.</p>

<p>Before discussing data types and structures, the first lesson in R is
how to assign values to objects. In R (<a href="http://blog.revolutionanalytics.com/2008/12/use-equals-or-arrow-for-assignment.html">for quirky
reasons</a>),
the primary means of assignment is the arrow, <code class="highlighter-rouge">&lt;-</code>, which is a less than
symbol, <code class="highlighter-rouge">&lt;</code>, followed by a hyphen, <code class="highlighter-rouge">-</code>.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## assign value to object x using &lt;-</span><span class="w">
</span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">1</span><span class="w">

</span><span class="c1">## show</span><span class="w">
</span><span class="n">x</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] 1
</code></pre></div></div>

<p>You can also assign using a single equals sign, <code class="highlighter-rouge">=</code>:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## assign value to object y using =</span><span class="w">
</span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'a'</span><span class="w">

</span><span class="c1">## show</span><span class="w">
</span><span class="n">y</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] "a"
</code></pre></div></div>

<p>Keep in mind, however, that since <code class="highlighter-rouge">=</code> sometimes has other meanings in R
(it’s how functions set argument options), it may be clearer to use
<code class="highlighter-rouge">&lt;-</code>.</p>

<blockquote>
  <h4 id="quick-exercise-1">Quick exercise</h4>

  <p>Using the arrow, assign the output of <code class="highlighter-rouge">1 + 1</code> to <code class="highlighter-rouge">x</code>. Next subtract 1
from <code class="highlighter-rouge">x</code> and reassign the result to <code class="highlighter-rouge">x</code>.</p>
</blockquote>

<h1 id="data-types-and-structures">Data types and structures</h1>

<h2 id="types">Types</h2>

<p>There are three primary data types in R that you will regularly use:</p>
<ul>
  <li><code class="highlighter-rouge">logical</code></li>
  <li><code class="highlighter-rouge">numeric</code> (<code class="highlighter-rouge">integer</code> &amp; <code class="highlighter-rouge">double</code>)</li>
  <li><code class="highlighter-rouge">character</code></li>
</ul>

<h3 id="logical">Logical</h3>

<p>Logical vectors can be <code class="highlighter-rouge">TRUE</code>, <code class="highlighter-rouge">FALSE</code>, or <code class="highlighter-rouge">NA</code>. They can be assigned to
objects or returned by logical operators (<em>e.g.</em>, <code class="highlighter-rouge">==</code>, <code class="highlighter-rouge">!=</code>, <code class="highlighter-rouge">&lt;</code>, <code class="highlighter-rouge">&gt;</code>,
etc), which makes them useful for control flow in loops and functions.</p>

<p><strong>NB</strong> In R, you can shorten <code class="highlighter-rouge">TRUE</code> to <code class="highlighter-rouge">T</code> and <code class="highlighter-rouge">FALSE</code> to <code class="highlighter-rouge">F</code>, but both
the short and long versions must be capitalized.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## assignment</span><span class="w">
</span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="kc">TRUE</span><span class="w">
</span><span class="n">x</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] TRUE
</code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## ! == NOT</span><span class="w">
</span><span class="o">!</span><span class="n">x</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] FALSE
</code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## check</span><span class="w">
</span><span class="nf">is.logical</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] TRUE
</code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## evaluate</span><span class="w">
</span><span class="m">1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">2</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] TRUE
</code></pre></div></div>

<h3 id="numeric-integer-and-double">Numeric: Integer and Double</h3>

<p>Numeric values can be both <strong>integers</strong> and double precision floating
point values, or just <strong>doubles</strong>. R automatically converts between the
two data types for you, so knowing the difference between the two isn’t
really important for most analyses.</p>

<p>If you want to use an integer, place a capital <code class="highlighter-rouge">L</code> after the number like
<code class="highlighter-rouge">1L</code>. If a number is stored as an integer, some R output will place an
<code class="highlighter-rouge">L</code> behind the digits to let you know that. Mostly, R defaults to using
doubles, but if you see a number with an <code class="highlighter-rouge">L</code> behind it, know that it’s
still a number.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## use 'L' after digit to store as integer</span><span class="w">
</span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">1L</span><span class="w">
</span><span class="nf">is.integer</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] TRUE
</code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## R stores as double by default</span><span class="w">
</span><span class="n">y</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">1</span><span class="w">
</span><span class="nf">is.double</span><span class="p">(</span><span class="n">y</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] TRUE
</code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## both are numeric</span><span class="w">
</span><span class="nf">is.numeric</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] TRUE
</code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">is.numeric</span><span class="p">(</span><span class="n">y</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] TRUE
</code></pre></div></div>

<h3 id="character">Character</h3>

<p>Character values are stored as strings, which means you need to place
either single <code class="highlighter-rouge">'</code> or double <code class="highlighter-rouge">"</code> quotes around them. Numeric values can
also be stored as strings (sometimes useful if you must store leading
zeroes), but they have to be converted back to numbers before you can
perform numeric operations on them (like adding or subtracting) or use
them in a statistical model.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## store a string using quotation marks</span><span class="w">
</span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s1">'The quick brown fox jumps over the lazy dog.'</span><span class="w">
</span><span class="n">x</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] "The quick brown fox jumps over the lazy dog."
</code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## store a number with leading zeros</span><span class="w">
</span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s1">'00001'</span><span class="w">
</span><span class="n">x</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] "00001"
</code></pre></div></div>

<blockquote>
  <h4 id="quick-exercise-2">Quick exercise</h4>

  <p>Try to add a string digit to a numeric value. What happens? Can you
convert the string version on the fly so that the equation works?
(HINT: in R, you can change a vector type using <code class="highlighter-rouge">as.&lt;type&gt;()</code>, where
<code class="highlighter-rouge">&lt;type&gt;</code> is the name of what you want.)</p>
</blockquote>

<h2 id="structures">Structures</h2>

<p>Building on these data types, R relies on four primary data structures:</p>

<ul>
  <li><code class="highlighter-rouge">vector</code></li>
  <li><code class="highlighter-rouge">matrix</code><sup id="fnref:3"><a href="#fn:3" class="footnote">3</a></sup></li>
  <li><code class="highlighter-rouge">list</code></li>
  <li><code class="highlighter-rouge">dataframe</code></li>
</ul>

<h3 id="vector">Vector</h3>

<p>A vector in R is just a collection of the data types discussed. In fact,
a single value is a vector of one. Vectors do not have dimensions
(<code class="highlighter-rouge">dim()</code>), but do have <code class="highlighter-rouge">length()</code>, which is good to remember when
inspecting your data or writing loops and functions.</p>

<p>You combine multiple values using the concatenate, <code class="highlighter-rouge">c()</code>, function. We
will use <code class="highlighter-rouge">c()</code> a lot.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## create vector</span><span class="w">
</span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">1</span><span class="w">

</span><span class="c1">## check</span><span class="w">
</span><span class="n">is.vector</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] TRUE
</code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## add to vector (can do so recursively meaning old x can help make new x)</span><span class="w">
</span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="m">5</span><span class="p">,</span><span class="w"> </span><span class="m">8</span><span class="p">)</span><span class="w">
</span><span class="n">x</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] 1 5 8
</code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## no dim...</span><span class="w">
</span><span class="nf">dim</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>NULL
</code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## ...but length</span><span class="w">
</span><span class="nf">length</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] 3
</code></pre></div></div>

<p>You can access the elements of a vector using brackets, <code class="highlighter-rouge">[]</code>, after the
object name. If you think of each element in the vector as having an
address, that is, a way to access it specifically, then its address is
its position number in the vector. This position number is called its
index, and in R, the index always starts with <code class="highlighter-rouge">1</code>.</p>

<p>In our current vector, we have three items, <code class="highlighter-rouge">1</code>, <code class="highlighter-rouge">5</code>, and <code class="highlighter-rouge">8</code>, which in
turn have indices of <code class="highlighter-rouge">1</code>, <code class="highlighter-rouge">2</code>, and <code class="highlighter-rouge">3</code>. To access <code class="highlighter-rouge">5</code> specifically, we
can call it using the brackets and its index: <code class="highlighter-rouge">x[2]</code>.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## get the second element</span><span class="w">
</span><span class="n">x</span><span class="p">[</span><span class="m">2</span><span class="p">]</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] 5
</code></pre></div></div>

<blockquote>
  <h4 id="quick-exercise-3">Quick exercise</h4>

  <p>Since you know how to access a specific element in a vector and how to
assign new values, try to change the 3rd element of the <code class="highlighter-rouge">x</code> vector to
4.</p>
</blockquote>

<p>All values in a vector must be of the same type. If you concatenate
values of different data types, R will automatically promote all values
to least ambiguous type. We can check this with <code class="highlighter-rouge">class()</code>.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## check class of x</span><span class="w">
</span><span class="nf">class</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] "numeric"
</code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## add character</span><span class="w">
</span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="s1">'a'</span><span class="p">)</span><span class="w">
</span><span class="n">x</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] "1" "5" "8" "a"
</code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## check class</span><span class="w">
</span><span class="nf">class</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] "character"
</code></pre></div></div>

<h3 id="matrix">Matrix</h3>

<p>A matrix is a 2D arrangement of data types. Instead of length, it has
dimensions. Like vectors, all data elements must be of the same type.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## create 3 x 3 matrix that is the sequence of numbers between 1 and 9</span><span class="w">
</span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">matrix</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">9</span><span class="p">,</span><span class="w"> </span><span class="n">nrow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="n">ncol</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3</span><span class="p">)</span><span class="w">
</span><span class="n">x</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     [,1] [,2] [,3]
[1,]    1    4    7
[2,]    2    5    8
[3,]    3    6    9
</code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## ...fill by row this time</span><span class="w">
</span><span class="n">y</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">matrix</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">9</span><span class="p">,</span><span class="w"> </span><span class="n">nrow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="n">ncol</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="n">byrow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">)</span><span class="w">
</span><span class="n">y</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     [,1] [,2] [,3]
[1,]    1    2    3
[2,]    4    5    6
[3,]    7    8    9
</code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## a matrix has dimension</span><span class="w">
</span><span class="nf">dim</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] 3 3
</code></pre></div></div>

<p>Use <code class="highlighter-rouge">nrow()</code> and <code class="highlighter-rouge">ncol()</code> to get the number of rows and columns,
respectively.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## # of rows</span><span class="w">
</span><span class="n">nrow</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] 3
</code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## # of columns</span><span class="w">
</span><span class="n">ncol</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] 3
</code></pre></div></div>

<p>Like a vector, you can access parts of a matrix. Since it has two
dimensions, use a comma in the bracket to separate row indices from
column indices.</p>

<p>When using brackets with objects that have two dimensions, a good rule
of thumb is to add your comma first: <code class="highlighter-rouge">x[ , ]</code>. Numbers or objects you
put between the first bracket and the comma will affect the rows;
numbers between the comma and the closing bracket will affect the
columns.</p>

<p>If you don’t put anything in either of those spaces (a blank space
doesn’t count), R will assume you want all rows or columns, depending on
which side of the comma is blank.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## show the values in the first row</span><span class="w">
</span><span class="n">x</span><span class="p">[</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="p">]</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] 1 4 7
</code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## show the values in the third column</span><span class="w">
</span><span class="n">x</span><span class="p">[</span><span class="w"> </span><span class="p">,</span><span class="m">3</span><span class="p">]</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] 7 8 9
</code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## this is the same as just calling x by itself</span><span class="w">
</span><span class="n">x</span><span class="p">[</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="p">]</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     [,1] [,2] [,3]
[1,]    1    4    7
[2,]    2    5    8
[3,]    3    6    9
</code></pre></div></div>

<blockquote>
  <h4 id="quick-exercise-4">Quick exercise</h4>

  <p>Return the middle value of the <code class="highlighter-rouge">x</code> matrix. Next assign the middle
value the character value ‘a’. What happens to the rest of the values
in the matrix?</p>
</blockquote>

<h3 id="list">List</h3>

<p>Lists are a catch all objects that can hold an assortment of other
objects of different data types. They can be flat, meaning that all
values are at the same level, or nested, with lists holding other lists.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## create single-level list</span><span class="w">
</span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="s1">'a'</span><span class="p">,</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">)</span><span class="w">

</span><span class="c1">## show</span><span class="w">
</span><span class="n">x</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[[1]]
[1] 1

[[2]]
[1] "a"

[[3]]
[1] TRUE
</code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## check</span><span class="w">
</span><span class="nf">is.list</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] TRUE
</code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## create blank list</span><span class="w">
</span><span class="n">y</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">list</span><span class="p">()</span><span class="w">

</span><span class="c1">## add to first list, creating nested list</span><span class="w">
</span><span class="n">z</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">)</span><span class="w">

</span><span class="c1">## show</span><span class="w">
</span><span class="n">z</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[[1]]
[[1]][[1]]
[1] 1

[[1]][[2]]
[1] "a"

[[1]][[3]]
[1] TRUE


[[2]]
list()
</code></pre></div></div>

<p>You access items in lists like you do vectors and matrices. You may,
however, need to use double brackets, <code class="highlighter-rouge">[[]]</code>, and multiple pairs,
<code class="highlighter-rouge">[[]][[]]</code>, to reach the item you need.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## the first item in list z is list x</span><span class="w">
</span><span class="n">z</span><span class="p">[[</span><span class="m">1</span><span class="p">]]</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[[1]]
[1] 1

[[2]]
[1] "a"

[[3]]
[1] TRUE
</code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## to get to 'a' in list x, need to add more brackets</span><span class="w">
</span><span class="n">z</span><span class="p">[[</span><span class="m">1</span><span class="p">]][[</span><span class="m">2</span><span class="p">]]</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] "a"
</code></pre></div></div>

<h3 id="data-frame">Data frame</h3>

<p>Data frames are really just an organized collection of lists / vectors
that are the same length. That quick description, however, belies the
importance of data frames: you will use them all the time in your data
work.</p>

<p>Most of the time, you will be reading in data frames, but you can also
create them.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## create data frame where col_* are the column (variable) names</span><span class="w">
</span><span class="n">df</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">data.frame</span><span class="p">(</span><span class="n">col_a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">2</span><span class="p">,</span><span class="m">3</span><span class="p">),</span><span class="w">
                 </span><span class="n">col_b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">4</span><span class="p">,</span><span class="m">5</span><span class="p">,</span><span class="m">6</span><span class="p">),</span><span class="w">
                 </span><span class="n">col_c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">7</span><span class="p">,</span><span class="m">8</span><span class="p">,</span><span class="m">9</span><span class="p">))</span><span class="w">

</span><span class="c1">## show</span><span class="w">
</span><span class="n">df</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  col_a col_b col_c
1     1     4     7
2     2     5     8
3     3     6     9
</code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## check</span><span class="w">
</span><span class="n">is.data.frame</span><span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] TRUE
</code></pre></div></div>

<p>Like matrices, data frames have a <code class="highlighter-rouge">dim()</code> and the number of rows and
columns can be recovered using <code class="highlighter-rouge">nrow()</code> and <code class="highlighter-rouge">ncol()</code>. The column names,
which are needed when estimating models and making graphics, are
accessed using <code class="highlighter-rouge">names()</code>.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## get column names</span><span class="w">
</span><span class="nf">names</span><span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] "col_a" "col_b" "col_c"
</code></pre></div></div>

<p>To access a column, you need to give R the data frame’s name followed by
a <code class="highlighter-rouge">$</code> and then the variable name.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## get col_a</span><span class="w">
</span><span class="n">df</span><span class="o">$</span><span class="n">col_a</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] 1 2 3
</code></pre></div></div>

<p>You can also use the <code class="highlighter-rouge">df[['&lt;var name&gt;']]</code> construction, which comes in
handy in loops and functions.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## get col_a (note the quotation marks this time)</span><span class="w">
</span><span class="n">df</span><span class="p">[[</span><span class="s1">'col_a'</span><span class="p">]]</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] 1 2 3
</code></pre></div></div>

<blockquote>
  <h4 id="quick-exercise-5">Quick exercise</h4>

  <p>Create two or three equal length vectors. Next, combine to create a
data frame. Finally, change one value in the data frame (HINT: think
about how you changed vector and matrix values before).</p>
</blockquote>

<h1 id="packages">Packages</h1>

<p>User-submitted packages are a huge part of what makes R great. Most of
your scripts will make use of one or more packages.</p>

<h2 id="installation">Installation</h2>

<h3 id="cran">CRAN</h3>

<p>As you’ve seen on the <a href="/rworkshop/start/">getting
started</a> page, packages can be installed from the official CRAN
repository using:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">install.packages</span><span class="p">(</span><span class="s1">'&lt;package name&gt;'</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p>The default option installs all dependencies (other packages that the
package you want may rely on to work properly). By default, R will check
how you installed R and download the right operating system file type.</p>

<blockquote>
  <h4 id="quick-exercise-6">Quick exercise</h4>

  <p>Install the <a href="https://CRAN.R-project.org/package=survey"><code class="highlighter-rouge">survey</code></a>
package, which we will use in a later module. Don’t forget to use
single or double quotation marks around the package name.</p>
</blockquote>

<h3 id="github">GitHub</h3>

<p>Recently, people have begun sharing the source code for their R packages
on <a href="https://github.com">GitHub</a>. If you want to download a package on
GitHub, either because it isn’t hosted on CRAN or because you want the
newest development version, you can use the <code class="highlighter-rouge">devtools</code> package to get it
(you will need <a href="https://git-scm.com"><code class="highlighter-rouge">git</code></a> on your system, too):</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">devtools</span><span class="p">)</span><span class="w">
</span><span class="n">install_github</span><span class="p">(</span><span class="s1">'&lt;github handle&gt;/&lt;repo name&gt;'</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<h2 id="loading-package-libraries">Loading package libraries</h2>

<p>Package libraries<sup id="fnref:4"><a href="#fn:4" class="footnote">4</a></sup> can loaded in a number of ways, but the easiest it
to write:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="s1">'&lt;library name&gt;'</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p>where <code class="highlighter-rouge">'&lt;library name&gt;'</code> is the name of the package/library. You will
need to load these before you can use their functions in your scripts.
Typically, they are placed at the top of the script file.</p>

<blockquote>
  <h4 id="quick-exercise-7">Quick exercise</h4>

  <p>Load the <code class="highlighter-rouge">tidyverse</code> package, which you should have already installed.
This will be a good test of the installation since we will use
tidyverse libraries throughout the rest of the workshop.</p>
</blockquote>

<h1 id="help">Help</h1>

<p>Even I don’t have every R function and nuance memorized. With all the
user-written packages, it would be difficult to keep up if I tried! When
stuck, there are a few ways to get help.</p>

<h2 id="help-files">Help files</h2>

<p>In the console, typing a function name immediately after a question mark
will bring up that function’s help file:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## get help file for function</span><span class="w">
</span><span class="o">?</span><span class="n">sum</span><span class="w">
</span></code></pre></div></div>

<p>Two question marks will search for the command name in CRAN packages:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## search for function in CRAN</span><span class="w">
</span><span class="o">??</span><span class="n">sum</span><span class="w">
</span></code></pre></div></div>

<h2 id="google-it">Google it!</h2>

<p>Google is a coder’s best friend. If you are having a problem, odds are a
1,000 other people have too and at least one of them has been brave (or
foolhardy!) enough to ask about it in a forum like
<a href="https://stackoverflow.com">StackOverflow</a>,
<a href="https://stackoverflow.com">CrossValidated</a>, or <a href="https://stat.ethz.ch/mailman/listinfo/r-help">R-help mailing
list</a>. Google it!</p>

<h1 id="miscellaneous-notes-about-r">Miscellaneous notes about R</h1>

<h2 id="compared-to-other-statistical-languages">Compared to other statistical languages</h2>

<p>Like all computing languages, R has its own structure and quirks. The
idiomatic R approach to data analysis can be especially challenging at
first for those who come to R from other common statistical packages or
scripting languages, like
<a href="https://www.ibm.com/products/spss-statistics">SPSS</a>,
<a href="https://www.python.org">Python</a>, and
<a href="https://www.stata.com">Stata</a>.<sup id="fnref:5"><a href="#fn:5" class="footnote">5</a></sup></p>

<p>I came to R after learning Stata first, which I think is common for many
researchers trained in econometric methods. For me and others who’ve
made the same Stata-to-R transition, I think the root of many problems
is the fundamental difference between how Stata and R operate. Whereas
Stata is more of a <a href="https://en.wikipedia.org/wiki/Procedural_programming">procedural
language</a> in which
commands <strong>do</strong> things in an environment (your data), R is more
<a href="https://en.wikipedia.org/wiki/Object-oriented_programming">object-oriented</a>
in that data and functions are <strong>stored</strong> in variables or objects and
await instructions that pertain to them.<sup id="fnref:6"><a href="#fn:6" class="footnote">6</a></sup></p>

<p>As pointed out by my friend and colleague <a href="https://www.shu.edu/profiles/RichardBlissett.cfm">Richard
Blissett</a>, users can
see this difference in the command/function names in each language.
Stata commands tend to be verbs: <code class="highlighter-rouge">summarize</code>, <code class="highlighter-rouge">tabulate</code>, and <code class="highlighter-rouge">regress</code>;
on the other hand, R functions are often nouns: <code class="highlighter-rouge">summary</code>, <code class="highlighter-rouge">table</code>, and
<code class="highlighter-rouge">lm</code> (for linear model). And so, common problems in the R to Stata
switch such as</p>
<ul>
  <li><em>I ran a model and didn’t get any output…</em></li>
  <li><em>How do I create local/global macros in R?</em></li>
  <li><em>Which of these data objects is the actual data?</em></li>
  <li><em>Why isn’t R <strong>doing</strong> anything?</em></li>
</ul>

<p>may be due to misunderstanding this difference.<sup id="fnref:7"><a href="#fn:7" class="footnote">7</a></sup></p>

<p>Like learning a new spoken language, constantly translating between your
native tongue and the new language will only get you so far. To that
end, I encourage native-Stata users to try to approach R without Stata
procedures in mind (easier said than done, I know). That said, this
document that shows the same analysis done in <a href="http://rslblissett.com/wp-content/uploads/2016/09/sidebyside_130826.pdf">Stata and R
side-by-side</a>
may be useful in the initial transition.</p>

<h2 id="other-options-for-running-r">Other options for running R</h2>

<p>There are many other ways besides RStudio to run R. Below are just a few
that, depending on your personal preferences and project needs, may be
better or worse than RStudio.</p>

<ul>
  <li>R-app (comes with the R installation)</li>
  <li>Terminal/shell (R executable needs to be in your path)</li>
  <li><a href="https://ess.r-project.org">Emacs + ESS</a></li>
  <li><a href="https://atom.io">Atom</a> + <a href="https://atom.io/packages/r-exec">r-exec</a></li>
  <li><a href="http://jupyter.org">Jupyter</a> +
<a href="https://irkernel.github.io">IRkernel</a></li>
</ul>

<h2 id="miscellanea">Miscellanea</h2>

<ul>
  <li>R script files end in <code class="highlighter-rouge">.r</code> or <code class="highlighter-rouge">.R</code></li>
  <li>1-indexed (indexes start at 1 instead of 0)</li>
  <li>Base commands usually written in C/C++ under the hood</li>
  <li>Can be run in batch mode from the terminal/command line
    <ul>
      <li>older: <code class="highlighter-rouge">R CMD BATCH</code></li>
      <li>newer: <code class="highlighter-rouge">Rscript</code></li>
    </ul>
  </li>
</ul>

<h1 id="notes">Notes</h1>

<div class="footnotes">
  <ol>
    <li id="fn:1">
      <p>The “data scientist” as a person/title, like “big data,” has
probably become a little played out, but for lack of a better
catch-all term, I think everyone knows what I mean.&nbsp;<a href="#fnref:1" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:2">
      <p>For a little more history on R, particularly its success as an
open source project, see <a href="https://journal.r-project.org/archive/2009-2/RJournal_2009-2_Fox.pdf">Fox
(2009)</a>&nbsp;<a href="#fnref:2" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:3">
      <p>R also supports arrays, which can take on more than two
dimensions.&nbsp;<a href="#fnref:3" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:4">
      <p>For clarity, I’ll call them packages when talking about what is
downloaded and libraries when discussing what is loaded into memory.
Since the names are the same, it’s really a semantic difference.&nbsp;<a href="#fnref:4" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:5">
      <p>If you come to R knowing C/C++, Fortran, or Java, see
<a href="http://www.rcpp.org">Rcpp</a>, <a href="http://www.rfortran.org">rFortran</a>,
<a href="https://www.rforge.net/rJava/index.html">rJava</a> for some cool
interactivity.&nbsp;<a href="#fnref:5" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:6">
      <p>Stata has some object-oriented features and R some procedural
programming behaviors, so the assigned labels aren’t perfect. They
are mostly right, though.&nbsp;<a href="#fnref:6" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:7">
      <p>Full disclosure: all questions I asked when learning R.&nbsp;<a href="#fnref:7" class="reversefootnote">&#8617;</a></p>
    </li>
  </ol>
</div>



      </section>
      <footer>
        <p>
  Benjamin Skinner</br>  
  Research Assistant Professor of Education</br>  
  University of Virginia</br>  
  <a href="https://www.btskinner.me" class="iconlink">
    <i class="fas fa-home fa-lg"></i></a> | 
  <a href="https://github.com/btskinner" class="iconlink">
    <i class="fab fa-github fa-lg"></i></a> | 
  <a href="mailto:btskinner@virginia.edu" class="iconlink">
    <i class="far fa-envelope fa-lg"></i></a> | 
  <a href="https://twitter.com/btskinner" class="iconlink">
    <i class="fab fa-twitter fa-lg"></i></a>
</p>
<p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>

      </footer>
    </div>
    <script src="/rworkshop/assets/js/scale.fix.js"></script>

    
    
    
    

    
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-63981025-1', 'auto');
        ga('send', 'pageview');
    </script>
  
  </body>
</html>
